**[참고] 본 내용은 [해당 강의](https://www.inflearn.com/course/%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EB%8F%99%EC%8B%9C%EC%84%B1-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/dashboard)의 요약본 입니다.**

# 1. 코루틴과 비동기 함수
## 1.1 바운드와 블로킹
1. CPU 바운드  
    프로그램이 실행될 때 실행 속도가 CPU 속도에 의해 제한됨을 의미한다. CPU의 연산 속도 때문에 프로그램이 느려지는 것으로 복잡한 계산시에 컴퓨터 실행 속도가 느려진다.

2. I/O 바운드  
    프로그램이 실행될때 실행 속도가 I/O에 의해서 제한됨을 의미한다.
    사용자가 입력을 기다리는 프로그램의 경우 입력을 요청하고 응답이 올때까지 프로그램이 기다리게 된다. 이는 키보드 뿐만 아니라 컴퓨터간의 네트워크 통신에서도 I/O 바운드가 발생하는데 이를 **네트워크 I/O 바운드**라고 한다.

>여러가지 바운드 (메모리 바운드 등등)있지만 위의 2가지를 중점으로 살펴 볼것

3. 블로킹  
    바운드에 의해 코드가 멈추게 되는 현상

4. 논블로킹  
    바운드에 의해 코드가 멈추지 않는 것

## 1.2 동기와 비동기
1. 동기(Sync)
    코드가 동기적으로 동작한다는 의미는 코드가 반드시 작성된 순서 그대로 실행되는 것이다.

2. 비동기(Async)
    코드가 비동기적으로 동작한다는 의미는 코드가 반드시 작성된 순서 그대로 실행되지 않는 것이다.

배달부가 손님 3명 A, B, C에게 짜장면을 주문 받았을 때, 처리해야 할 일은 다음과 같다.

1. A에게 짜장면을 배달한다.
2. 짜장면을 다 먹을 때까지 기다린다.
3. 그릇을 수거한다.  
4. B에게 짜장면을 배달한다.
5. 짜장면을 다 먹을 때까지 기다린다.
6. 그릇을 수거한다.
7. C에게 짜장면을 배달한다.
8. 짜장면을 다 먹을 때까지 기다린다.
9. 그릇을 수거한다.

즉, 짜장면 1.배달과 2.그릇 수거의 일을 짜장면을 다 먹을 때까지 기다리는 것이 동기이다.

비동기 이 일을 진행하면 A에게 짜장면을 배달하고 다 먹을때까지 기다리지 않고 B에게 짜장면을 배달하는 것이다. 마찬가지로 B가 짜장면을 다 먹을때까지 기다리지 않고 C에게 짜장면을 배달한다. 이 사이에 A가 다 먹으면 그릇을 수거하로 가고 이대로 B,C의 그릇을 수거해 가는 것이다.

## 1-3 파이썬 코루틴
### 루틴
일련의 명령 (코드의 흐름)
1. 메인 루틴  
    프로그램의 메인 코드의 흐름
2. 서브 루틴  
    - 하나의 진입점과 하나의 탈출점이 있는 루틴
    - 함수나 메소드 ( 메인 루틴을 보조하는 역할 )
3. 코루틴
    - 서브 루틴의 일반화된 형태
    - 다양한 진입점과 다양한 탈출점이 있는 루틴  
 
파이썬 비동기 함수는 코루틴 함수로 만들 수 있다.


# 2. 파이썬 멀티 스레딩과 멀티 프로세스
## 2-1. 컴퓨터 구조와 OS 기본
### 컴퓨터의 구성 요소
- CPU  
    명령어를 해석하여 실행하는 장치
- 메모리  
  - 주메모리  
    작업에 필요한 프로그램과 데이터를 저장하는 장치
  - 보조메모리  
    저장장치라고 불리며 데이터를 일시적 또는 영구적으로 저장하는 장치
- 입출력장치  
- 시스템 버스

### 운영체제(OS)
컴퓨터 시스템을 운영하고 관리하는 소프트웨어

- 운영체제가 없는 컴퓨터는 처음에 설계한 대로만 사용할 수 있는 단순 계산기
- 운영체제가 있는 컴퓨터를 프로그램이 가능한 기계라고 한다.
- WindowOS, MacOS, Ubuntu

### Process (프로세스)
- 프로그램  
    - 어떤 문제를 해결하기 위해 컴퓨터에게 주어지는 처리 방법과 순서를 기술한 일련의 명령문의 집합체
    - 프로그램은 HDD, SSD와 같은 저장장치에 보관되어 있다.
    - 사용자는 어떤 이유로 프로그램을 실행하기 위해 프로그램 바로가기 버턴을 눌러서 실행시킨다.
  
- 프로그램이 실행된다는 것
  - 해당 프로그램의 작성된 코드들이 주메모리로 올라와서 작업이 진행된다.
  - 이를 **프로세스**라 한다.
  
  > 프로그램 : 저장장치에 저장된 정적인 상태  
  > 프로세스 : 실행을 위해 주메모리에 올라온 동자적인 상태

- 프로세스가 생성되면 CPU는 프로세스가 해야할 작업을 수행한다.
- 이때 CPU가 처리하는 작업의 단위가 **스레드**이다.

### Thread (스레드)
프로세스 내에서 실행되는 여러 작업의 단위

- 싱글 스레드  
    스레드가 한 개로 동작
- 멀티 스레딩  
    여러 개의 스레드가 동작
    - 멀티 스레딩에서 스레드는 다수의 스레드끼리 메모리 공유와 통신이 가능    
      - 자원의 낭비를 막고 효율성 향상
      - 한 스레드에 문제가 생기면 전체 프로세스에 영향을 미친다.
- 종류
    - 사용자 수준 스레드 : 파이썬
    - 커널 수준 스레드 : 운영체제 수준

## 2-2. 동시성(병행성) vs 병렬성
### 동시성(concurrency)
한 번에 여러 작업을 동시에 다루는 것을 의미
- 논리적 개념으로 멀티 스레딩에서 사용되기도 하고 싱글 스레드에서 사용되기도 한다.
- 또한 싱글 코어 뿐만 아니라 멀티 코어에서도 각각의 코어가 동시성을 사용할 수 있다.

### 병렬성(Parallelism)
한 번에 여러 작업을 병렬적으로 처리하는 것을 의미 (at the sametime)
- 병렬성은 물리적 개념으로 멀티 코어에서 작업을 병렬적으로 수행한다.

요리사에게
음식 주문이 한 번에 3개가 왔다.(라면, 파스타, 케익)
- 동시성  
  1. 라면 요리 작업 (라면 물 끓임)  
    스위칭
  2. 케익 요리 작업 (밀가루 반죽)  
    스위칭
  3. 파스타 요리 작업 (재료 손질)  
    스위칭
  4. 라면 요리 작업 (면과 스프 넣기)  
    스위칭
  5. 케익 요리 작업 (반죽 오븐에 넣기)  
    스위칭
  6. 파스타 요리 작업 (파스타 소스 만들기)  
  ...  

- 병렬성
  - 3명의 요리사가 각각의 요리를 동시(at the sametime)에 작업
    1. 라면 요리 작업 (라면 물 끓임) > 면과 스프 넣기
    2. 케익 요리 작업 (밀가루 반죽) > 반죽 오븐에 넣기
    3. 파스타 요리 작업 (재료 손질) > 파스타 소스 만들기

병렬적으로 진행함과 동시에 동시성으로 각각의 작업들을 진행 할 수 있다.

Python에서는 GIL로 인하여 멀티스레드가 병렬적으로 구현할 수 없다. 

## 2-3. 파이썬 멀티 프로세싱
멀티 스레딩은 스레드끼리 자원을 공유하기 때문에 하나의 자원을 동시에 여러 스레드가 가져가려고 하는 경우 충돌이 발생할 수 있다. Python에서는 이 문제를 해결하기 위해서 GIL을 도입하였다.

### GIL, Global Interpreter Lock
- 한 번에 1개의 스레드만 유지하는 락
- GIL은 본질적으로 한 스레드가 다른 스레드를 차단해서 제어를 얻는 것을 방지함. 즉, 멀티 스레딩의 위험으로부터 보호한다.
- 이 때문에 파이썬에서는 스레드로 병렬성 연산을 수행하지 못한다.
- 파이썬 멀티 스레딩은 동시성을 사용하여 io bound 코드에서는 유용하게 사용할 수 있지만 cpu bound 코드에서는 GIL에 의해 원하는 결과를 얻을 수 없다.

### 멀티 프로세싱의 장/단점
- 멀티 프로세싱은 자원을 공유하지 않기 때문에 이러한 문제가 없다.
- 대신 자원을 공유하지 않기 때문에 통신이 추가되고 이에 따라 직렬화, 역질렬화 등 추가적인 비용이 소모된다.
